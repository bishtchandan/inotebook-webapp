{"ast":null,"code":"import _defineProperty from\"/home/chandan/Desktop/projects/inotebook-webapp/backend/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/chandan/Desktop/projects/inotebook-webapp/backend/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/chandan/Desktop/projects/inotebook-webapp/backend/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/chandan/Desktop/projects/inotebook-webapp/backend/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/chandan/Desktop/projects/inotebook-webapp/backend/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{useHistory}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Login=function Login(props){var _useState=useState({email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),credentials=_useState2[0],setCredentials=_useState2[1];var history=useHistory();var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var response,json;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return fetch(\"http://localhost:5000/api/auth/login\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:credentials.email,password:credentials.password})});case 3:response=_context.sent;_context.next=6;return response.json();case 6:json=_context.sent;console.log(json);if(json.success){// redirect\nlocalStorage.setItem('token',json.authtoken);props.showAlert(\"Logged in successfully\",\"success\");history.push(\"/\");}else{props.showAlert(\"Invalid details\",\"danger\");}case 9:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var onChange=function onChange(e){setCredentials(_objectSpread(_objectSpread({},credentials),{},_defineProperty({},e.target.name,e.target.value)));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"my-2 text-center\",children:\"Login to continue with iNotebook\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-5 d-flex justify-content-center \",children:/*#__PURE__*/_jsxs(\"form\",{style:{width:'500px'},onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"form-label\",children:\"Email address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",value:credentials.email,id:\"email\",name:\"email\",\"aria-describedby\":\"emailHelp\",onChange:onChange}),/*#__PURE__*/_jsx(\"div\",{id:\"emailHelp\",className:\"form-text\",children:\"We'll never share your email with anyone else.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"form-label\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",value:credentials.password,id:\"password\",name:\"password\",onChange:onChange})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Login\"})]})})]});};export default Login;","map":{"version":3,"sources":["/home/chandan/Desktop/projects/inotebook-webapp/backend/client/src/components/Login.js"],"names":["React","useState","useHistory","Login","props","email","password","credentials","setCredentials","history","handleSubmit","e","preventDefault","fetch","method","headers","body","JSON","stringify","response","json","console","log","success","localStorage","setItem","authtoken","showAlert","push","onChange","target","name","value","width"],"mappings":"mtBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,UAAT,KAA2B,kBAA3B,C,6IAEA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACC,KAAD,CAAW,CACvB,cAAsCH,QAAQ,CAAC,CAAEI,KAAK,CAAE,EAAT,CAAaC,QAAQ,CAAE,EAAvB,CAAD,CAA9C,wCAAOC,WAAP,eAAoBC,cAApB,eACA,GAAIC,CAAAA,OAAO,CAAGP,UAAU,EAAxB,CACA,GAAMQ,CAAAA,YAAY,0FAAG,iBAAOC,CAAP,oIACnBA,CAAC,CAACC,cAAF,GADmB,sBAEIC,CAAAA,KAAK,CAAC,sCAAD,CAC1B,CACEC,MAAM,CAAE,MADV,CAEEC,OAAO,CAAE,CACP,eAAgB,kBADT,CAFX,CAKEC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAEb,KAAK,CAAEE,WAAW,CAACF,KAArB,CAA4BC,QAAQ,CAAEC,WAAW,CAACD,QAAlD,CAAf,CALR,CAD0B,CAFT,QAEba,QAFa,qCAWAA,CAAAA,QAAQ,CAACC,IAAT,EAXA,QAWbA,IAXa,eAYnBC,OAAO,CAACC,GAAR,CAAYF,IAAZ,EACA,GAAIA,IAAI,CAACG,OAAT,CAAkB,CAChB;AACAC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BL,IAAI,CAACM,SAAnC,EACAtB,KAAK,CAACuB,SAAN,CAAgB,wBAAhB,CAA0C,SAA1C,EACAlB,OAAO,CAACmB,IAAR,CAAa,GAAb,EACD,CALD,IAMK,CACHxB,KAAK,CAACuB,SAAN,CAAgB,iBAAhB,CAAmC,QAAnC,EACD,CArBkB,sDAAH,kBAAZjB,CAAAA,YAAY,4CAAlB,CAuBA,GAAMmB,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAAClB,CAAD,CAAO,CACtBH,cAAc,gCAAMD,WAAN,wBAAoBI,CAAC,CAACmB,MAAF,CAASC,IAA7B,CAAoCpB,CAAC,CAACmB,MAAF,CAASE,KAA7C,GAAd,CACD,CAFD,CAGA,mBACE,wCACE,WAAI,SAAS,CAAC,kBAAd,8CADF,cAEA,YAAK,SAAS,CAAC,qCAAf,uBACA,cAAM,KAAK,CAAE,CAACC,KAAK,CAAE,OAAR,CAAb,CAA+B,QAAQ,CAAEvB,YAAzC,wBACI,aAAK,SAAS,CAAC,MAAf,wBACE,cAAO,OAAO,CAAC,OAAf,CAAuB,SAAS,CAAC,YAAjC,2BADF,cAEE,cAAO,IAAI,CAAC,OAAZ,CAAoB,SAAS,CAAC,cAA9B,CAA6C,KAAK,CAAEH,WAAW,CAACF,KAAhE,CAAuE,EAAE,CAAC,OAA1E,CAAkF,IAAI,CAAC,OAAvF,CAA+F,mBAAiB,WAAhH,CAA4H,QAAQ,CAAEwB,QAAtI,EAFF,cAGE,YAAK,EAAE,CAAC,WAAR,CAAoB,SAAS,CAAC,WAA9B,4DAHF,GADJ,cAMI,aAAK,SAAS,CAAC,MAAf,wBACE,cAAO,OAAO,CAAC,UAAf,CAA0B,SAAS,CAAC,YAApC,sBADF,cAEE,cAAO,IAAI,CAAC,UAAZ,CAAuB,SAAS,CAAC,cAAjC,CAAgD,KAAK,CAAEtB,WAAW,CAACD,QAAnE,CAA6E,EAAE,CAAC,UAAhF,CAA2F,IAAI,CAAC,UAAhG,CAA2G,QAAQ,CAAEuB,QAArH,EAFF,GANJ,cAUI,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,iBAAhC,mBAVJ,GADA,EAFA,GADF,CAmBD,CAhDD,CAkDA,cAAe1B,CAAAA,KAAf","sourcesContent":["import React, { useState } from 'react'\nimport { useHistory } from 'react-router-dom';\n\nconst Login = (props) => {\n  const [credentials, setCredentials] = useState({ email: \"\", password: \"\" })\n  let history = useHistory();\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const response = await fetch(\"http://localhost:5000/api/auth/login\",\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({ email: credentials.email, password: credentials.password }),\n      }\n    );\n    const json = await response.json();\n    console.log(json);\n    if (json.success) {\n      // redirect\n      localStorage.setItem('token', json.authtoken);\n      props.showAlert(\"Logged in successfully\", \"success\");\n      history.push(\"/\");\n    }\n    else {\n      props.showAlert(\"Invalid details\", \"danger\");\n    }\n  }\n  const onChange = (e) => {\n    setCredentials({ ...credentials, [e.target.name]: e.target.value })\n  }\n  return (\n    <>\n      <h2 className=\"my-2 text-center\">Login to continue with iNotebook</h2>\n    <div className=\"mt-5 d-flex justify-content-center \">\n    <form style={{width: '500px'}} onSubmit={handleSubmit}>\n        <div className=\"mb-3\">\n          <label htmlFor=\"email\" className=\"form-label\">Email address</label>\n          <input type=\"email\" className=\"form-control\" value={credentials.email} id=\"email\" name=\"email\" aria-describedby=\"emailHelp\" onChange={onChange} />\n          <div id=\"emailHelp\" className=\"form-text\">We'll never share your email with anyone else.</div>\n        </div>\n        <div className=\"mb-3\">\n          <label htmlFor=\"password\" className=\"form-label\">Password</label>\n          <input type=\"password\" className=\"form-control\" value={credentials.password} id=\"password\" name=\"password\" onChange={onChange} />\n        </div>\n        <button type=\"submit\" className=\"btn btn-primary\">Login</button>\n      </form>\n    </div>\n    </>\n  )\n}\n\nexport default Login\n"]},"metadata":{},"sourceType":"module"}